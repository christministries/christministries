<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noah's Ark - Detailed Telugu Story</title>
    <style>
        /* Basic page styling for clean look */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e9ecef;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        h1 { color: #2c3e50; margin-bottom: 10px; text-align: center;}
        p.subtitle { color: #7f8c8d; margin-bottom: 25px; text-align: center; max-width: 600px;}

        /* The main container for the story presentation */
        #story-canvas {
            background-color: #ffffff;
            width: 900px; /* Slightly wider for detailed text */
            max-width: 100%;
            height: auto;
            min-height: 650px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Area for the scenario image */
        #image-stage {
            height: 400px;
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-bottom: 3px solid #3498db;
        }

        #story-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures image fills space without stretching */
            transition: opacity 0.5s ease;
        }

        /* Area for the detailed Telugu text */
        #caption-area {
            flex-grow: 1;
            padding: 25px 30px;
            background-color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        #telugu-caption {
            font-size: 1.3rem;
            color: #34495e;
            font-weight: 500;
            line-height: 1.6; /* Better readability for longer text */
            margin-bottom: 15px;
        }

        #english-sub {
            font-size: 0.95rem;
            color: #95a5a6;
            font-style: italic;
        }

        /* Controls Section */
        .controls-area {
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 900px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 28px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.1s, background-color 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        
        button:active { transform: scale(0.98); box-shadow: none; }

        #start-btn { background: linear-gradient(to right, #2ecc71, #27ae60); color: white; }
        #next-btn { background: linear-gradient(to right, #3498db, #2980b9); color: white; }
        #next-btn:disabled { background: #bdc3c7; cursor: not-allowed; background-image: none;}
        
        /* Voice Selection Styling */
        .voice-settings-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .voice-settings {
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #voice-info-note {
            font-size: 0.85rem;
            color: #e74c3c;
            margin-top: 5px;
            text-align: center;
        }
        
        select {
            padding: 6px;
            border-radius: 4px;
            border: 1px solid #ccc;
            max-width: 350px;
        }
    </style>
</head>
<body>

    <h1>Noah's Ark Story (‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞ì‡∞° ‡∞ï‡∞•)</h1>
    <p class="subtitle">A detailed retelling with scenario images and Telugu voice over.</p>

    <div id="story-canvas">
        <div id="image-stage">
            <img id="story-image" src="https://placehold.co/900x400/34495e/FFFFFF?text=Welcome.+Ensure+volume+is+up+and+click+Start." alt="Story Scene">
        </div>
        <div id="caption-area">
            <div id="telugu-caption">‡∞ï‡∞• ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã ‡∞µ‡∞ø‡∞®‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡±ç‡∞∞‡∞ø‡∞Ç‡∞¶ ‡∞â‡∞®‡±ç‡∞® 'Start Story' ‡∞¨‡∞ü‡∞®‡±ç‚Äå‡∞®‡±Å ‡∞ï‡±ç‡∞≤‡∞ø‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.</div>
            <div id="english-sub">Click the 'Start Story' button below to begin listening to the detailed narrative.</div>
        </div>
    </div>

    <div class="controls-area">
        <div class="voice-settings-container">
             <div class="voice-settings">
                <label for="voiceSelect">üîä Voice Selection:</label>
                <select id="voiceSelect"><option>Loading voices...</option></select>
            </div>
            <div id="voice-info-note">Note: Quality depends on your device. Android/Chrome usually provides the best female Telugu voice.</div>
        </div>

        <div class="buttons">
            <button id="start-btn" onclick="startStory()">Start Story ‚ñ∂</button>
            <button id="next-btn" onclick="nextScene()" disabled>Next Scene ‚û°</button>
        </div>
    </div>

    <script>
        // ==========================================
        // DETAILED STORY DATA WITH SCENARIO PROMPTS
        // ==========================================
        const storyData = [
            {
                // Scene 1: The Command to Build
                // Scenario: A wide shot of Noah and his sons constructing a massive wooden skeletal frame of a three-deck ark in a dry, dusty landscape under a hot sun.
                image: "https://placehold.co/900x400/8B4513/FFFFFF?text=Scenario:+Noah+and+sons+building+massive+wooden+ark+frame+in+dry+land",
                telugu: "‡∞™‡±Ç‡∞∞‡±ç‡∞µ‡∞ï‡∞æ‡∞≤‡∞Ç‡∞≤‡±ã, ‡∞≠‡±Ç‡∞Æ‡∞ø‡∞™‡±à ‡∞Æ‡∞®‡±Å‡∞∑‡±Å‡∞≤ ‡∞™‡∞æ‡∞™‡∞Ç ‡∞™‡±Ü‡∞∞‡∞ø‡∞ó‡∞ø‡∞™‡±ã‡∞Ø‡∞ø‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å, ‡∞¶‡±á‡∞µ‡±Å‡∞°‡±Å ‡∞µ‡∞æ‡∞∞‡∞ø‡∞®‡∞ø ‡∞ö‡±Ç‡∞∏‡∞ø ‡∞¶‡±Å‡∞É‡∞ñ‡∞ø‡∞Ç‡∞ö‡∞æ‡∞°‡±Å. ‡∞ï‡∞æ‡∞®‡±Ä ‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞Ö‡∞®‡±á ‡∞í‡∞ï ‡∞®‡±Ä‡∞§‡∞ø‡∞Æ‡∞Ç‡∞§‡±Å‡∞°‡±Å ‡∞¶‡±á‡∞µ‡±Å‡∞®‡∞ø ‡∞¶‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞≤‡±ã ‡∞¶‡∞Ø ‡∞™‡±ä‡∞Ç‡∞¶‡∞æ‡∞°‡±Å. ‡∞¶‡±á‡∞µ‡±Å‡∞°‡±Å ‡∞®‡±ã‡∞µ‡∞π‡±Å‡∞ï‡±Å ‡∞∞‡∞æ‡∞¨‡±ã‡∞Ø‡±á ‡∞ú‡∞≤‡∞™‡±ç‡∞∞‡∞≥‡∞Ø‡∞Ç ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø, ‡∞§‡∞® ‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ó‡±ã‡∞´‡∞∞‡±Å ‡∞Æ‡±ç‡∞∞‡∞æ‡∞®‡±Å‡∞§‡±ã ‡∞Æ‡±Ç‡∞°‡±Å ‡∞Ö‡∞Ç‡∞§‡∞∏‡±ç‡∞§‡±Å‡∞≤ ‡∞™‡±Ü‡∞¶‡±ç‡∞¶ ‡∞ì‡∞°‡∞®‡±Å ‡∞ï‡∞ü‡±ç‡∞ü‡∞Æ‡∞®‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞¶‡∞ø‡∞∑‡±ç‡∞ü‡∞Æ‡±à‡∞® ‡∞ï‡±ä‡∞≤‡∞§‡∞≤‡∞§‡±ã ‡∞Ü‡∞ú‡±ç‡∞û‡∞æ‡∞™‡∞ø‡∞Ç‡∞ö‡∞æ‡∞°‡±Å. ‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞¶‡±á‡∞µ‡±Å‡∞®‡∞ø‡∞ï‡∞ø ‡∞≠‡∞Ø‡∞™‡∞°‡∞ø, ‡∞§‡∞® ‡∞ï‡±Å‡∞Æ‡∞æ‡∞∞‡±Å‡∞≤‡∞§‡±ã ‡∞ï‡∞≤‡∞ø‡∞∏‡∞ø ‡∞é‡∞®‡±ç‡∞®‡±ã ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞≤‡±Å ‡∞ï‡∞∑‡±ç‡∞ü‡∞™‡∞°‡∞ø ‡∞Ü ‡∞ó‡±ä‡∞™‡±ç‡∞™ ‡∞ì‡∞°‡∞®‡±Å ‡∞∏‡∞ø‡∞¶‡±ç‡∞ß‡∞Ç ‡∞ö‡±á‡∞∂‡∞æ‡∞°‡±Å.",
                english: "(Summary: God saw wickedness but chose righteous Noah. He commanded Noah to build a massive three-deck ark to save his family from a coming flood. Noah obediently spent years building it.)"
            },
            {
                // Scene 2: The Animals Enter
                // Scenario: The completed ark stands ready with a large ramp. A peaceful procession of diverse animals‚Äîlions, elephants, giraffes, birds‚Äîmarches two by two up the ramp into the ark, guided by unseen forces.
                image: "https://placehold.co/900x400/228B22/FFFFFF?text=Scenario:+Completed+Ark+with+ramp.+Animals(lions,elephants,birds)+entering+two-by-two",
                telugu: "‡∞ì‡∞° ‡∞®‡∞ø‡∞∞‡±ç‡∞Æ‡∞æ‡∞£‡∞Ç ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞Ø‡∞ø‡∞® ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§, ‡∞¶‡±á‡∞µ‡±Å‡∞°‡±Å ‡∞®‡±ã‡∞µ‡∞π‡±Å‡∞®‡±Å ‡∞ì‡∞°‡∞≤‡±ã‡∞ï‡∞ø ‡∞™‡±ç‡∞∞‡∞µ‡±á‡∞∂‡∞ø‡∞Ç‡∞ö‡∞Æ‡∞®‡∞ø ‡∞ö‡±Ü‡∞™‡±ç‡∞™‡∞æ‡∞°‡±Å. ‡∞Ö‡∞¶‡±ç‡∞≠‡±Å‡∞§‡∞Æ‡±à‡∞® ‡∞∞‡±Ä‡∞§‡∞ø‡∞≤‡±ã, ‡∞≠‡±Ç‡∞Æ‡∞ø‡∞™‡±à ‡∞â‡∞®‡±ç‡∞® ‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞∞‡∞ï‡∞æ‡∞≤ ‡∞ú‡∞Ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å, ‡∞™‡∞ï‡±ç‡∞∑‡±Å‡∞≤‡±Å, ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡∞æ‡∞ï‡±á ‡∞™‡±Å‡∞∞‡±Å‡∞ó‡±Å‡∞≤‡±Å ‡∞ú‡∞Ç‡∞ü‡∞≤‡±Å ‡∞ú‡∞Ç‡∞ü‡∞≤‡±Å‡∞ó‡∞æ ‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞¶‡∞ó‡±ç‡∞ó‡∞∞‡∞ï‡±Å ‡∞µ‡∞ö‡±ç‡∞ö‡∞ø ‡∞∂‡∞æ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞ì‡∞°‡∞≤‡±ã‡∞ï‡∞ø ‡∞™‡±ç‡∞∞‡∞µ‡±á‡∞∂‡∞ø‡∞Ç‡∞ö‡∞æ‡∞Ø‡∞ø. ‡∞®‡±ã‡∞µ‡∞π‡±Å, ‡∞Ö‡∞§‡∞®‡∞ø ‡∞≠‡∞æ‡∞∞‡±ç‡∞Ø, ‡∞Æ‡±Å‡∞ó‡±ç‡∞ó‡±Å‡∞∞‡±Å ‡∞ï‡±Å‡∞Æ‡∞æ‡∞∞‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞µ‡∞æ‡∞∞‡∞ø ‡∞≠‡∞æ‡∞∞‡±ç‡∞Ø‡∞≤‡±Å ‡∞ö‡∞ø‡∞µ‡∞∞‡∞ø‡∞ó‡∞æ ‡∞≤‡±ã‡∞™‡∞≤‡∞ø‡∞ï‡∞ø ‡∞µ‡±Ü‡∞≥‡±ç‡∞≥‡∞ø‡∞® ‡∞§‡∞∞‡±Å‡∞µ‡∞æ‡∞§, ‡∞¶‡±á‡∞µ‡±Å‡∞°‡±á ‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ó‡∞æ ‡∞ì‡∞° ‡∞§‡∞≤‡±Å‡∞™‡±Å‡∞®‡±Å ‡∞¨‡∞Ø‡∞ü ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞Æ‡±Ç‡∞∏‡∞ø‡∞µ‡±á‡∞∂‡∞æ‡∞°‡±Å.",
                english: "(Summary: The ark was finished. Animals miraculously arrived two by two and peacefully entered the ark. Once Noah's family was inside, God shut the door.)"
            },
            {
                // Scene 3: The Great Flood Rising
                // Scenario: A dark, chaotic scene. Torrential rain pours from black clouds. The ark is afloat on rough, rising floodwaters that have nearly covered mountain peaks. Lightning flashes in the distance.
                image: "https://placehold.co/900x400/00008B/FFFFFF?text=Scenario:+Dark+storm,+heavy+rain.+Ark+floating+on+rough+water+covering+mountains",
                telugu: "‡∞è‡∞°‡∞µ ‡∞∞‡±ã‡∞ú‡±Å‡∞®, ‡∞Ü‡∞ï‡∞æ‡∞∂‡∞Ç ‡∞Ø‡±ä‡∞ï‡±ç‡∞ï ‡∞§‡±Ç‡∞Æ‡±Å‡∞≤‡±Å ‡∞µ‡∞ø‡∞™‡±ç‡∞™‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Æ‡∞π‡∞æ‡∞ó‡∞æ‡∞ß ‡∞ú‡∞≤‡∞ß‡∞æ‡∞∞‡∞≤‡±Å ‡∞â‡∞¨‡∞ø‡∞ï‡∞ø‡∞µ‡∞ö‡±ç‡∞ö‡∞æ‡∞Ø‡∞ø. ‡∞®‡∞≤‡∞≠‡±à ‡∞™‡∞ó‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞®‡∞≤‡∞≠‡±à ‡∞∞‡∞æ‡∞§‡±ç‡∞∞‡±Å‡∞≤‡±Å ‡∞≠‡∞Ø‡∞Ç‡∞ï‡∞∞‡∞Æ‡±à‡∞® ‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç ‡∞≠‡±Ç‡∞Æ‡∞ø‡∞™‡±à ‡∞ï‡±Å‡∞∞‡∞ø‡∞∏‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞µ‡∞∞‡∞¶ ‡∞®‡±Ä‡∞∞‡±Å ‡∞™‡±Ü‡∞∞‡∞ø‡∞ó‡∞ø, ‡∞é‡∞§‡±ç‡∞§‡±à‡∞® ‡∞™‡∞∞‡±ç‡∞µ‡∞§‡∞æ‡∞≤‡∞®‡±Å ‡∞ï‡±Ç‡∞°‡∞æ ‡∞Æ‡±Å‡∞Ç‡∞ö‡±á‡∞∏‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞≠‡±Ç‡∞Æ‡∞ø‡∞™‡±à ‡∞â‡∞®‡±ç‡∞® ‡∞ú‡±Ä‡∞µ‡∞∞‡∞æ‡∞∂‡±Å‡∞≤‡∞®‡±ç‡∞®‡±Ä ‡∞®‡∞∂‡∞ø‡∞Ç‡∞ö‡∞ø‡∞™‡±ã‡∞Ø‡∞æ‡∞Ø‡∞ø. ‡∞ï‡∞æ‡∞®‡±Ä, ‡∞Ü ‡∞≠‡∞Ø‡∞Ç‡∞ï‡∞∞‡∞Æ‡±à‡∞® ‡∞§‡±Å‡∞´‡∞æ‡∞®‡±Å ‡∞Æ‡∞ß‡±ç‡∞Ø‡∞≤‡±ã, ‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ö‡∞§‡∞®‡∞ø‡∞§‡±ã ‡∞â‡∞®‡±ç‡∞®‡∞µ‡∞æ‡∞∞‡∞Ç‡∞¶‡∞∞‡±Ç ‡∞ì‡∞°‡∞≤‡±ã ‡∞∏‡±Å‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞§‡∞Ç‡∞ó‡∞æ ‡∞®‡±Ä‡∞ü‡∞ø‡∞™‡±à ‡∞§‡±á‡∞≤‡∞ø‡∞Ø‡∞æ‡∞°‡∞æ‡∞∞‡±Å.",
                english: "(Summary: Torrential rain fell for 40 days. The floodwaters rose, covering mountains and destroying life on earth. But Noah and those in the ark floated safely amidst the storm.)"
            },
            {
                // Scene 4: The Dove and the Olive Leaf
                // Scenario: The rain has stopped. The ark rests on a rocky mountain peak (Ararat). A white dove flies towards the ark, carrying a bright green olive leaf in its beak under a clearing sky.
                image: "https://placehold.co/900x400/87CEEB/FFFFFF?text=Scenario:+Rain+stopped,+Ark+on+mountain+peak.+Dove+returning+with+olive+leaf",
                telugu: "‡∞®‡±Ç‡∞ü ‡∞Ø‡∞æ‡∞≠‡±à ‡∞∞‡±ã‡∞ú‡±Å‡∞≤ ‡∞§‡∞∞‡±Å‡∞µ‡∞æ‡∞§ ‡∞®‡±Ä‡∞∞‡±Å ‡∞§‡∞ó‡±ç‡∞ó‡∞°‡∞Ç ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø, ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞ì‡∞° ‡∞Ö‡∞∞‡∞æ‡∞∞‡∞æ‡∞§‡±Å ‡∞™‡∞∞‡±ç‡∞µ‡∞§‡∞æ‡∞≤‡∞™‡±à ‡∞®‡∞ø‡∞≤‡∞ø‡∞ö‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞Æ‡∞∞‡∞ø‡∞ï‡±ä‡∞®‡±ç‡∞®‡∞ø ‡∞∞‡±ã‡∞ú‡±Å‡∞≤ ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§, ‡∞®‡±á‡∞≤ ‡∞Ü‡∞∞‡∞ø‡∞™‡±ã‡∞Ø‡∞ø‡∞Ç‡∞¶‡±ã ‡∞≤‡±á‡∞¶‡±ã ‡∞§‡±Ü‡∞≤‡±Å‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞ì‡∞° ‡∞ï‡∞ø‡∞ü‡∞ø‡∞ï‡±Ä‡∞≤‡±ã‡∞Ç‡∞ö‡∞ø ‡∞í‡∞ï ‡∞™‡∞æ‡∞µ‡±Å‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞¨‡∞Ø‡∞ü‡∞ï‡±Å ‡∞™‡∞Ç‡∞™‡∞æ‡∞°‡±Å. ‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞ï‡∞æ‡∞≤‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Ü ‡∞™‡∞æ‡∞µ‡±Å‡∞∞‡∞Ç ‡∞§‡∞® ‡∞®‡±ã‡∞ü ‡∞í‡∞ï ‡∞™‡∞ö‡±ç‡∞ö‡∞ø ‡∞í‡∞≤‡±Ä‡∞µ ‡∞Ü‡∞ï‡±Å‡∞®‡±Å ‡∞§‡±Å‡∞Ç‡∞ö‡±Å‡∞ï‡±ä‡∞®‡∞ø ‡∞Ö‡∞§‡∞®‡∞ø ‡∞¶‡∞ó‡±ç‡∞ó‡∞∞‡∞ï‡±Å ‡∞§‡∞ø‡∞∞‡∞ø‡∞ó‡∞ø ‡∞µ‡∞ö‡±ç‡∞ö‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞Ö‡∞¶‡∞ø ‡∞ö‡±Ç‡∞∏‡∞ø ‡∞®‡±ã‡∞µ‡∞π‡±Å‡∞ï‡±Å ‡∞≠‡±Ç‡∞Æ‡∞ø‡∞™‡±à ‡∞®‡±Ä‡∞∞‡±Å ‡∞§‡∞ó‡±ç‡∞ó‡∞ø‡∞™‡±ã‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞®‡∞ø, ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞≤‡±Å ‡∞Æ‡±ä‡∞≤‡±Å‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞Ø‡∞®‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞£ ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø.",
                english: "(Summary: The water receded, and the ark rested on a mountain. Noah sent out a dove, which returned with a fresh olive leaf, proving the land was drying and life was returning.)"
            },
            {
                // Scene 5: The Rainbow Covenant
                // Scenario: Noah and his family stand on dry land next to an altar, looking up at the sky. A brilliant, full rainbow arches across the clouds over the resting ark in the background.
                image: "https://placehold.co/900x400/FFD700/000000?text=Scenario:+Noah's+family+on+dry+land+looking+at+a+brilliant+Rainbow+in+the+sky",
                telugu: "‡∞¶‡±á‡∞µ‡±Å‡∞®‡∞ø ‡∞Ü‡∞ú‡±ç‡∞û ‡∞Æ‡±á‡∞∞‡∞ï‡±Å ‡∞Ö‡∞Ç‡∞¶‡∞∞‡±Ç ‡∞ì‡∞° ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞¨‡∞Ø‡∞ü‡∞ï‡±Å ‡∞µ‡∞ö‡±ç‡∞ö‡∞æ‡∞∞‡±Å. ‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞¶‡±á‡∞µ‡±Å‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡±É‡∞§‡∞ú‡±ç‡∞û‡∞§‡∞ó‡∞æ ‡∞í‡∞ï ‡∞¨‡∞≤‡∞ø‡∞™‡±Ä‡∞†‡∞Æ‡±Å ‡∞ï‡∞ü‡±ç‡∞ü‡∞æ‡∞°‡±Å. ‡∞¶‡±á‡∞µ‡±Å‡∞°‡±Å ‡∞µ‡∞æ‡∞∞‡∞ø‡∞®‡∞ø ‡∞Ü‡∞∂‡±Ä‡∞∞‡±ç‡∞µ‡∞¶‡∞ø‡∞Ç‡∞ö‡∞ø, '‡∞á‡∞ï‡∞™‡±à ‡∞é‡∞®‡±ç‡∞®‡∞°‡±Ç ‡∞ú‡∞≤‡∞™‡±ç‡∞∞‡∞≥‡∞Ø‡∞Æ‡±Å‡∞§‡±ã ‡∞∏‡∞Æ‡∞∏‡±ç‡∞§ ‡∞∂‡∞∞‡±Ä‡∞∞‡±Å‡∞≤‡∞®‡±Å ‡∞®‡∞æ‡∞∂‡∞®‡∞Æ‡±Å ‡∞ö‡±á‡∞Ø‡∞®‡±Å' ‡∞Ö‡∞®‡∞ø ‡∞µ‡∞æ‡∞ó‡±ç‡∞¶‡∞æ‡∞®‡∞Ç ‡∞ö‡±á‡∞∂‡∞æ‡∞°‡±Å. ‡∞à ‡∞∂‡∞æ‡∞∂‡±ç‡∞µ‡∞§‡∞Æ‡±à‡∞® ‡∞®‡∞ø‡∞¨‡∞Ç‡∞ß‡∞®‡∞ï‡±Å ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡±Å‡∞ó‡∞æ, ‡∞¶‡±á‡∞µ‡±Å‡∞°‡±Å ‡∞Ü‡∞ï‡∞æ‡∞∂‡∞Ç‡∞≤‡±ã‡∞®‡∞ø ‡∞Æ‡±á‡∞ò‡∞æ‡∞≤‡∞≤‡±ã ‡∞í‡∞ï ‡∞Ö‡∞Ç‡∞¶‡∞Æ‡±à‡∞® ‡∞á‡∞Ç‡∞¶‡±ç‡∞∞‡∞ß‡∞®‡∞∏‡±ç‡∞∏‡±Å‡∞®‡±Å ‡∞â‡∞Ç‡∞ö‡∞æ‡∞°‡±Å.",
                english: "(Summary: They exited the ark and thanked God. God blessed them and promised never to destroy the earth by flood again, placing a rainbow in the sky as the sign of His covenant.)"
            }
        ];

        // ==========================================
        // JAVASCRIPT LOGIC
        // ==========================================
        let currentSceneIndex = 0;
        const synth = window.speechSynthesis;
        const voiceSelect = document.getElementById('voiceSelect');
        const storyImage = document.getElementById('story-image');
        const teluguCaption = document.getElementById('telugu-caption');
        const englishSub = document.getElementById('english-sub');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const voiceInfoNote = document.getElementById('voice-info-note');
        
        let voices = [];
        let selectedTeluguVoice = null;

        // 1. SMART VOICE LOADING FUNCTION
        function populateVoices() {
            voices = synth.getVoices();
            voiceSelect.innerHTML = '';
            let teluguVoicesFound = [];

            // Filter for Telugu voices
            voices.forEach((voice) => {
                if(voice.lang.includes('te')) {
                    teluguVoicesFound.push(voice);
                }
            });

            if (teluguVoicesFound.length === 0) {
                // No Telugu voices found at all
                const option = document.createElement('option');
                option.textContent = "No specific Telugu voice found on device.";
                voiceSelect.appendChild(option);
                voiceInfoNote.textContent = "Warning: Your device does not have a Telugu text-to-speech engine installed. It will try to read using a default voice.";
                voiceInfoNote.style.color = "red";
            } else {
                // Telugu voices found - try to find the best "female" sounding one
                // Google voices on Android/Chrome usually sound female and high quality.
                let bestVoice = teluguVoicesFound.find(v => v.name.includes('Google') && v.lang.includes('te-IN')) || 
                                teluguVoicesFound.find(v => v.name.toLowerCase().includes('female')) ||
                                teluguVoicesFound[0]; // Fallback to the first one found

                selectedTeluguVoice = bestVoice;

                // Populate dropdown
                teluguVoicesFound.forEach(voice => {
                    const option = document.createElement('option');
                    let label = `${voice.name} (${voice.lang})`;
                    if (voice === bestVoice) {
                         label = `üåü BEST MATCH: ${label}`;
                         option.style.fontWeight = "bold";
                         option.selected = true;
                    }
                    option.textContent = label;
                    option.value = voice.name;
                    voiceSelect.appendChild(option);
                });

                 voiceInfoNote.textContent = `Ready. Using voice: ${selectedTeluguVoice.name}. (Ensure volume is up)`;
                 voiceInfoNote.style.color = "#27ae60";
            }
        }

        // Browser voice loading is asynchronous, we need to wait for it.
        populateVoices();
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = populateVoices;
        }

        // 2. SPEAK FUNCTION
        function speak(text) {
            if (synth.speaking) {
                synth.cancel(); // Stop whatever is currently speaking
            }
            
            const utterThis = new SpeechSynthesisUtterance(text);
            
            // If we found a Telugu voice, use it.
            if (selectedTeluguVoice) {
                utterThis.voice = selectedTeluguVoice;
            }
            
            // Adjustments for storytelling clarity
            // Slightly slower rate for detailed text
            utterThis.rate = 0.85; 
            // Pitch adjustment (trying to make it sound slightly softer/more feminine if the engine allows)
            utterThis.pitch = 1.1; 

            // Event to enable the "Next" button only when speaking finishes
            utterThis.onend = function() {
                 if (currentSceneIndex < storyData.length - 1) {
                    nextBtn.disabled = false;
                 }
            };

            synth.speak(utterThis);
        }

        // 3. STORY FLOW LOGIC
        function loadScene(index) {
            nextBtn.disabled = true; // Disable next until audio finishes

            if (index >= storyData.length) {
                finishStory();
                return;
            }

            const scene = storyData[index];

            // Fade effect for image
            storyImage.style.opacity = 0;
            setTimeout(() => {
                storyImage.src = scene.image;
                storyImage.style.opacity = 1;
            }, 300);

            // Update Text
            teluguCaption.style.opacity = 0;
            setTimeout(() => {
                 teluguCaption.textContent = scene.telugu;
                 englishSub.textContent = scene.english;
                 teluguCaption.style.opacity = 1;
                 // Trigger Audio after text is visible
                 speak(scene.telugu);
            }, 300);


            // Update Button Text for last scene
            if (index === storyData.length - 1) {
                nextBtn.textContent = "Finish Story (Wait for audio)";
            } else {
                nextBtn.textContent = "Next Scene ‚û° (Wait for audio)";
            }
        }

        function startStory() {
            // Important: Audio needs user interaction first
            if (synth.notAllowedError) {
                 alert("Audio autoplay is blocked. Please interact with the page.");
                 return;
            }
            startBtn.style.display = 'none';
            nextBtn.style.display = 'inline-block';
            currentSceneIndex = 0;
            loadScene(currentSceneIndex);
        }

        function nextScene() {
            currentSceneIndex++;
            loadScene(currentSceneIndex);
        }

        function finishStory() {
            storyImage.src = "https://placehold.co/900x400/2c3e50/FFFFFF?text=The+End+-+‡∞ï‡∞•+‡∞∏‡∞Æ‡∞æ‡∞™‡±ç‡∞§‡∞Ç";
            teluguCaption.textContent = "‡∞à ‡∞µ‡∞ø‡∞ß‡∞Ç‡∞ó‡∞æ, ‡∞®‡±ã‡∞µ‡∞π‡±Å ‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞∏‡∞Ç ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞Æ‡∞æ‡∞®‡∞µ‡∞ú‡∞æ‡∞§‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞ú‡∞Ç‡∞§‡±Å‡∞ú‡∞æ‡∞≤‡∞Ç ‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞ø. (‡∞ï‡∞• ‡∞∏‡∞Æ‡∞æ‡∞™‡±ç‡∞§‡∞Ç)";
            englishSub.textContent = "Thus, through Noah's faith, mankind and animal kind were saved. (Story Finished)";
            nextBtn.style.display = 'none';
            startBtn.style.display = 'inline-block';
            startBtn.textContent = "Replay Story ‚Üª";
            synth.cancel();
        }
    </script>
</body>
</html>
